# NATS Server Configuration for Fly.io
# See: https://docs.nats.io/running-a-nats-service/configuration

# Server settings
server_name: "rust-commerce-nats"

# Listen on all interfaces
host: "0.0.0.0"

# Client connections
port: 4222

# HTTP monitoring
http_port: 8222

# Cluster port for multi-instance setup
cluster {
    name: "rust-commerce-cluster"
    host: "0.0.0.0"
    port: 6222
    
    # Routes for clustering (will be populated by Fly.io)
    routes: []
}

# Logging
log_file: "/dev/stdout"
logtime: true
debug: false
trace: false

# Limits
max_connections: 1000
max_control_line: 4096
max_payload: 1048576
max_pending: 67108864

# Ping settings
ping_interval: "2m"
ping_max: 2

# Write deadline
write_deadline: "10s"

# JetStream disabled for single instance setup
# Enable when clustering is properly configured
# jetstream {
#     store_dir: "/data/jetstream"
#     max_memory_store: 256MB
#     max_file_store: 2GB
# }
